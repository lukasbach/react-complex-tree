"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[212],{7448:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>a,default:()=>m,frontMatter:()=>r,metadata:()=>c,toc:()=>d});var o=n(7896),i=(n(2784),n(876));const r={sidebar_position:10},a="Interaction Modes",c={unversionedId:"guides/interaction-modes",id:"guides/interaction-modes",title:"Interaction Modes",description:"The interaction mode for a tree environment refers to how mouse inputs should interact with the tree.",source:"@site/docs/guides/interaction-modes.mdx",sourceDirName:"guides",slug:"/guides/interaction-modes",permalink:"/docs/guides/interaction-modes",draft:!1,editUrl:"https://github.com/lukasbach/react-complex-tree/edit/main/packages/docs/docs/guides/interaction-modes.mdx",tags:[],version:"current",sidebarPosition:10,frontMatter:{sidebar_position:10},sidebar:"tutorialSidebar",previous:{title:"Keyboard Bindings",permalink:"/docs/guides/keyboard"},next:{title:"External Interaction via Refs",permalink:"/docs/guides/refs"}},l={},d=[{value:"<code>InteractionMode.ClickArrowToExpand</code>",id:"interactionmodeclickarrowtoexpand",level:2},{value:"<code>InteractionMode.ClickItemToExpand</code>",id:"interactionmodeclickitemtoexpand",level:2},{value:"<code>InteractionMode.DoubleClickItemToExpand</code>",id:"interactionmodedoubleclickitemtoexpand",level:2},{value:"Custom interaction modes",id:"custom-interaction-modes",level:2},{value:"Completely omitting interaction modes",id:"completely-omitting-interaction-modes",level:2}],s={toc:d};function m(e){let{components:t,...n}=e;return(0,i.kt)("wrapper",(0,o.Z)({},s,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"interaction-modes"},"Interaction Modes"),(0,i.kt)("p",null,"The interaction mode for a tree environment refers to how mouse inputs should interact with the tree.\nThe interaction mode can be provided as prop to the tree environment with the name ",(0,i.kt)("inlineCode",{parentName:"p"},"interactionMode")," and needs\nto follow ",(0,i.kt)("a",{parentName:"p",href:"docs/api/enums/InteractionMode"},"the ",(0,i.kt)("inlineCode",{parentName:"a"},"InteractionMode")," enum"),"\nThe following interaction modes are provided by default:"),(0,i.kt)("h2",{id:"interactionmodeclickarrowtoexpand"},(0,i.kt)("inlineCode",{parentName:"h2"},"InteractionMode.ClickArrowToExpand")),(0,i.kt)("admonition",{type:"note"},(0,i.kt)("p",{parentName:"admonition"},"See ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/lukasbach/react-complex-tree/blob/main/packages/core/src/interactionMode/ClickArrowToExpandInteractionManager.ts"},"the implementation of that interaction mode"),"\nfor more details.")),(0,i.kt)("p",null,"Clicking on items only moves focus. Pressing the CTRL key while clicking toggles the select state of the\nclicked item. Expanding items is only possible by clicking on the arrow or via keyboard interactions.\nClicking on an item without children invokes the primary action for that item."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-jsx",metastring:"live",live:!0},'function App() {\n  return (\n    <UncontrolledTreeEnvironment\n      dataProvider={new StaticTreeDataProvider(longTree.items, (item, data) => ({ ...item, data }))}\n      getItemTitle={item => item.data}\n      viewState={{}}\n      defaultInteractionMode={\'click-arrow-to-expand\'}\n    >\n      <Tree treeId="tree-1" rootItem="root" treeLabel="Tree Example" />\n    </UncontrolledTreeEnvironment>\n  );\n}\n')),(0,i.kt)("h2",{id:"interactionmodeclickitemtoexpand"},(0,i.kt)("inlineCode",{parentName:"h2"},"InteractionMode.ClickItemToExpand")),(0,i.kt)("admonition",{type:"note"},(0,i.kt)("p",{parentName:"admonition"},"See ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/lukasbach/react-complex-tree/blob/main/packages/core/src/interactionMode/ClickItemToExpandInteractionManager.ts"},"the implementation of that interaction mode"),"\nfor more details.")),(0,i.kt)("p",null,"This is the default interaction mode. Clicking on items changes the select state to only the clicked item,\nfocuses the item and expands or collapses the item if it has children. Pressing the CTRL key while clicking toggles\nthe select state of the clicked item.\nClicking on an item without children invokes the primary action for that item."),(0,i.kt)("p",null,"This resembles the way how VSCode provides interactions with its tree view."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-jsx",metastring:"live",live:!0},'function App() {\n  return (\n    <UncontrolledTreeEnvironment\n      dataProvider={new StaticTreeDataProvider(longTree.items, (item, data) => ({ ...item, data }))}\n      getItemTitle={item => item.data}\n      viewState={{}}\n      defaultInteractionMode={\'click-item-to-expand\'}\n    >\n      <Tree treeId="tree-2" rootItem="root" treeLabel="Tree Example" />\n    </UncontrolledTreeEnvironment>\n  );\n}\n')),(0,i.kt)("h2",{id:"interactionmodedoubleclickitemtoexpand"},(0,i.kt)("inlineCode",{parentName:"h2"},"InteractionMode.DoubleClickItemToExpand")),(0,i.kt)("admonition",{type:"note"},(0,i.kt)("p",{parentName:"admonition"},"See ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/lukasbach/react-complex-tree/blob/main/packages/core/src/interactionMode/DoubleClickItemToExpandInteractionManager.ts"},"the implementation of that interaction mode"),"\nfor more details.")),(0,i.kt)("p",null,"This is the default interaction mode. Clicking on items changes the select state to only the clicked item, but\ndoes not expand or collapse parents or execute primary actions.\nDouble clicking an item expands or collapses parents and invokes primary actions on items without children.\nPressing the CTRL key while clicking toggles the select state of the clicked item."),(0,i.kt)("p",null,"This resembles the way of IntelliJ or other Jetbrain IDEs provides interactions with its tree view."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-jsx",metastring:"live",live:!0},'function App() {\n  return (\n    <UncontrolledTreeEnvironment\n      dataProvider={new StaticTreeDataProvider(longTree.items, (item, data) => ({ ...item, data }))}\n      getItemTitle={item => item.data}\n      viewState={{}}\n      defaultInteractionMode={\'double-click-item-to-expand\'}\n    >\n      <Tree treeId="tree-3" rootItem="root" treeLabel="Tree Example" />\n    </UncontrolledTreeEnvironment>\n  );\n}\n')),(0,i.kt)("h2",{id:"custom-interaction-modes"},"Custom interaction modes"),(0,i.kt)("p",null,"Instead of providing a string referring to the desired interaction mode, you can also provide a custom\ninteraction manager implementation which implements the ",(0,i.kt)("a",{parentName:"p",href:"/docs/api/interfaces/InteractionManager"},"InteractionManager"),"\nimplementation."),(0,i.kt)("p",null,"Essentially, it needs to implement a ",(0,i.kt)("inlineCode",{parentName:"p"},"createInteractiveElementProps")," method which provides HTML props for\na interactive tree item node. Look ",(0,i.kt)("a",{parentName:"p",href:"/docs/api/interfaces/InteractionManager"},"into the API")," to see which\nparameters are available as arguments."),(0,i.kt)("p",null,"The best way to get started is to look into the\n",(0,i.kt)("a",{parentName:"p",href:"https://github.com/lukasbach/react-complex-tree/tree/main/packages/core/src/interactionMode"},"implementations of existing interaction modes"),",\nto see which props you should implement."),(0,i.kt)("p",null,"The following example shows a custom very simple interaction mode which only focuses items when clicking on them,\nbut never selects them."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-jsx",metastring:"live",live:!0},"function App() {\n  return (\n    <UncontrolledTreeEnvironment\n      dataProvider={new StaticTreeDataProvider(longTree.items, (item, data) => ({ ...item, data }))}\n      getItemTitle={item => item.data}\n      defaultInteractionMode={{\n        mode: 'custom',\n        createInteractiveElementProps: (item, treeId, actions, renderFlags) => ({\n          onClick: e => {\n            actions.focusItem();\n          },\n          onFocus: () => {\n            actions.focusItem();\n          },\n          tabIndex: !renderFlags.isRenaming ? (renderFlags.isFocused ? 0 : -1) : undefined,\n        }),\n      }}\n      viewState={{\n        ['tree-4']: {\n          expandedItems: ['Fruit', 'Meals'],\n        },\n      }}\n    >\n      <Tree treeId=\"tree-4\" rootItem=\"root\" treeLabel=\"Tree Example\" />\n    </UncontrolledTreeEnvironment>\n  );\n}\n")),(0,i.kt)("p",null,"Typically, you don't want to implement the complete interaction manager yourself. You can specify one\nof the default interaction modes that you want to extend with the ",(0,i.kt)("inlineCode",{parentName:"p"},"extend")," prop:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-jsx",metastring:"live",live:!0},"function App() {\n  return (\n    <UncontrolledTreeEnvironment\n      dataProvider={new StaticTreeDataProvider(longTree.items, (item, data) => ({ ...item, data }))}\n      getItemTitle={item => item.data}\n      defaultInteractionMode={{\n        mode: 'custom',\n        extends: 'click-item-to-expand',\n        createInteractiveElementProps: (item, treeId, actions, renderFlags) => ({\n          onMouseOver: () => {\n            document\n              .querySelectorAll(`[data-rct-tree=\"tree-5\"] [data-rct-item-id]`)\n              .forEach(element => (element.style.background = 'transparent'));\n            document.querySelector(`[data-rct-tree=\"tree-5\"]  [data-rct-item-id=\"${item.index}\"]`).style.background =\n              'red';\n          },\n        }),\n      }}\n      viewState={{\n        ['tree-5']: {\n          expandedItems: ['Fruit', 'Meals'],\n        },\n      }}\n    >\n      <Tree treeId=\"tree-5\" rootItem=\"root\" treeLabel=\"Tree Example\" />\n    </UncontrolledTreeEnvironment>\n  );\n}\n")),(0,i.kt)("h2",{id:"completely-omitting-interaction-modes"},"Completely omitting interaction modes"),(0,i.kt)("p",null,"The interaction mode defines, how the ",(0,i.kt)("inlineCode",{parentName:"p"},"interactiveElementProps")," prop is created for rendering the interactive\nelement of an tree item. The prop can also easily be omitted in custom render implementations and individual DOM\ninteractions can be defined instead.\n",(0,i.kt)("a",{parentName:"p",href:"/docs/guides/rendering"},"Look into the documentation on custom render hooks")," to find out more."))}m.isMDXComponent=!0},876:(e,t,n)=>{n.d(t,{Zo:()=>s,kt:()=>u});var o=n(2784);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,o,i=function(e,t){if(null==e)return{};var n,o,i={},r=Object.keys(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var l=o.createContext({}),d=function(e){var t=o.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):a(a({},t),e)),n},s=function(e){var t=d(e.components);return o.createElement(l.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},p=o.forwardRef((function(e,t){var n=e.components,i=e.mdxType,r=e.originalType,l=e.parentName,s=c(e,["components","mdxType","originalType","parentName"]),p=d(n),u=i,h=p["".concat(l,".").concat(u)]||p[u]||m[u]||r;return n?o.createElement(h,a(a({ref:t},s),{},{components:n})):o.createElement(h,a({ref:t},s))}));function u(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var r=n.length,a=new Array(r);a[0]=p;var c={};for(var l in t)hasOwnProperty.call(t,l)&&(c[l]=t[l]);c.originalType=e,c.mdxType="string"==typeof e?e:i,a[1]=c;for(var d=2;d<r;d++)a[d]=n[d];return o.createElement.apply(null,a)}return o.createElement.apply(null,n)}p.displayName="MDXCreateElement"}}]);